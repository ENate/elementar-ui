<div class="border bg-white dark:bg-dark dark:border-inverse rounded-lg relative">
  <div class="p-7">
    @defer {
      <ng-content></ng-content>
    } @placeholder (minimum 1s) {
      Loading...
    }
  </div>
  @if (hasScr) {
    <div class="border-t dark:border-t-neutral-600" [class.hidden]="!showSource">
      <markdown #markdownRef [src]="src"
                [clipboardButtonTemplate]="clipboardButtonTemplate"></markdown>
    </div>
  }

  <div class="border-t dark:border-t-neutral-600 relative py-1 px-2 text-center bg-neutral-50 rounded-b-lg dark:bg-neutral-700">
    @if (showSource) {
      <div class="flex items-center gap-2 absolute start-3 top-3">
        @if (htmlSrc) {
          <div class="rounded-full hover:bg-neutral-200 border px-2.5 py-1 text-sm cursor-pointer [&.active]:bg-white
                      [&.active]:dark:bg-neutral-400 dark:hover:bg-neutral-400 dark:hover:border-neutral-400
                      dark:border-neutral-400 dark:text-white"
               [class.active]="isCurrentTab('html')" (click)="selectTab('html')">HTML</div>
        }

        @if (tsSrc) {
          <div class="rounded-full hover:bg-neutral-200 border px-2.5 py-1 text-sm cursor-pointer [&.active]:bg-white
                      [&.active]:dark:bg-neutral-400 dark:hover:bg-neutral-400 dark:hover:border-neutral-400
                      dark:border-neutral-400 dark:text-white"
               [class.active]="isCurrentTab('ts')" (click)="selectTab('ts')">TS</div>
        }

        @if (cssSrc) {
          <div class="rounded-full hover:bg-neutral-200 border px-2.5 py-1 text-sm cursor-pointer [&.active]:bg-white
                      [&.active]:dark:bg-neutral-400 dark:hover:bg-neutral-400 dark:hover:border-neutral-400
                      dark:border-neutral-400 dark:text-white"
               [class.active]="isCurrentTab('css')" (click)="selectTab('css')">CSS</div>
        }
      </div>
    }

    <button mat-icon-button (click)="toggleSource()">
      <mat-icon class="material-symbols-outlined">code</mat-icon>
    </button>

    @if (hasScr) {
      <button mat-icon-button (click)="contentCopy()">
        <mat-icon class="material-symbols-outlined">content_copy</mat-icon>
      </button>
    }
  </div>
</div>

<ng-template #clipboardButtonTemplate>
  <button mat-icon-button color="accent" (click)="contentCopy()">
    <mat-icon class="material-symbols-outlined">content_copy</mat-icon>
  </button>
</ng-template>
