<emr-panel class="h-full">
  <emr-panel-header class="h-20">
    <div class="h-full flex items-center justify-between px-10">
      <div class="font-bold">Tasks</div>
      <div class="flex items-center gap-2">
        <button mat-button>
          <mat-icon>add</mat-icon>Invite
        </button>
        <emr-avatar-group>
          <emr-avatar text="am"></emr-avatar>
          <emr-avatar text="ps" class="bg-cyan-500"></emr-avatar>
          <emr-avatar text="br" class="bg-red-500"></emr-avatar>
          <emr-avatar-total>+20</emr-avatar-total>
        </emr-avatar-group>
        <button mat-icon-button>
          <mat-icon>settings</mat-icon>
        </button>
      </div>
    </div>
  </emr-panel-header>
  <emr-panel-body class="relative">
    <div class="absolute inset-x-10 inset-y-0 overflow-auto pt-1.5">
      <div class="flex gap-5 h-full pb-5" cdkDropListGroup>
        @for (column of columns; track column) {
          <div class="flex flex-col gap-3">
            <div class="h-7 flex gap-2 items-center justify-between flex-none">
              <div class="flex gap-2 items-center uppercase text-sm">
                @if (column.color) {
                  <div class="size-3 rounded-full" [style.background-color]="column.color"></div>
                }
                {{ column.name }} ({{ column.items.length }})
              </div>
              <button mat-icon-button>
                <mat-icon>add</mat-icon>
              </button>
            </div>
            <div class="bg-surface-container-low grow w-72 flex-none rounded-2xl p-3 flex flex-col gap-3"
                 cdkDropList [cdkDropListData]="column.items" (cdkDropListDropped)="drop($event)">
              @for (item of column.items; track item) {
                <div class="bg-surface-container-lowest rounded-2xl p-3 shadow-sm cursor-pointer hover:bg-surface-container-lowest"
                     cdkDrag [cdkDragData]="item" matRipple>
                  <div class="bg-surface-container-highest rounded-2xl p-3 shadow-sm cursor-pointer min-h-20"
                       *cdkDragPlaceholder></div>
                  <div class="font-medium text-sm">{{ item.name }}</div>
                  <div class="flex items-center justify-between mt-3.5">
                    <emr-dicebear [key]="item.assignee.id" class="size-7"/>
                    <mat-icon [style.color]="item.priority.color" class="filled">flag</mat-icon>
                  </div>
                </div>
              }
            </div>
          </div>
        }
      </div>
    </div>
  </emr-panel-body>
</emr-panel>
